/*
 * cw_hidereveal 0.7.1
 * A simple version of a Hide Reveal script. Many Hide Reveal scripts are bloated and don't always work in all layouts.
 * http://clivewalkden.co.uk/code/cw_hide_reveal/
 *
 * Copyright 2018, Clive Walkden <clivewalkden@gmail.com>
 * Released under the MIT license.
 */

!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):n(jQuery)}(function(n){n.fn.CWHideReveal=function(e){var i={speed:300,easing:"",changeText:!1,showText:this.text(),hideText:"Hide",accordian:!1,openClass:"cw_open",activeLinkMode:!0,activeLinkClass:"cw_active",defaultOpen:null,internalLinks:!1,internalLinkClass:"cw_link",loaded:function(){},opened:function(){},closed:function(){}},t=n.extend({},i,e),a={container:null,currentLink:null,accordians:[],internalLinks:[]},c={checkData:function(e){null===a.currentLink&&(a.currentLink=n(e)),null===a.container&&(a.container=n("#"+a.currentLink.data("id")))},hidden:function(){return a.container.hasClass(t.openClass)},toggle:function(n){return c.hidden(n)?c.hide(n):c.show(n),!1},show:function(n){c.checkData(n),a.container.slideDown(t.speed,t.easing,function(){t.opened&&t.opened.call(this),!0===t.changeText&&c.changeText(n),t.activeLinkMode&&a.currentLink.addClass(t.activeLinkClass),a.container.addClass(t.openClass)}),t.accordian&&(c.hideAccordian(),a.accordians.push(a.container))},hide:function(n){t.closed&&t.closed.call(this),t.activeLinkMode&&a.currentLink.removeClass(t.activeLinkClass),a.container.removeClass(t.openClass),a.container.slideUp(t.speed,t.easing,function(){!0===t.changeText&&c.changeText(n)})},hideAccordian:function(){var e=a.container,i=a.currentLink;if(a.accordians.length&&e.attr("id")===a.accordians[0].attr("id"))return a.accordians.shift(),!1;n.each(a.accordians,function(){a.container=n(this),a.currentLink=n('[data-id="'+n(this).attr("id")+'"]'),c.hide(n(this))}),a.container=e,a.currentLink=i,a.accordians.shift()},hideAll:function(n){n.css({display:"none"})},changeText:function(n){a.container.is(":visible")?n.text(n.data("hideText")):n.text(n.data("showText"))},saveLink:function(n){n.data("showText",n.text()).data("hideText",t.hideText)},getLinks:function(n){a.internalLinks.push(n.find("a."+t.internalLinkClass))}};this.each(function(){var e=n(this);t.loaded&&t.loaded.call(this),c.hideAll(n("#"+e.data("id"))),t.internalLinks&&n("#"+e.data("id")).find("."+t.internalLinkClass).each(function(){n(this).on("click",function(){console.log(n('[data-id="'+n(this).data("trigger")+'"]')),n('[data-id="'+n(this).data("trigger")+'"]').trigger("click")})}),t.changeText&&c.saveLink(e),t.defaultOpen&&e.data("id")===t.defaultOpen&&c.show(e),e.on("click",function(e){return e.preventDefault(),a.currentLink=n(this),a.container=n("#"+a.currentLink.data("id")),c.toggle(a.currentLink),this})})}});