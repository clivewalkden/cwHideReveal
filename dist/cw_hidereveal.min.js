/*! CW Hide Reveal - v0.5.0 - 2014-01-30
* https://github.com/clivewalkden/cwHideReveal
* Copyright (c) 2014 Clive Walkden; Licensed MIT */
!function(a){a.fn.CWHideReveal=function(b){var c={speed:300,easing:"",changeText:!1,showText:this.text(),hideText:"Hide",accordian:!1,openClass:"cw_open",activeLinkMode:!0,activeLinkClass:"cw_active",defaultOpen:null},d=a.extend({},c,b),e={container:null,currentLink:null,accordians:[]},f={checkData:function(b){null===e.currentLink&&(e.currentLink=a(b)),null===e.container&&(e.container=a("#"+e.currentLink.data("id")))},hidden:function(){return e.container.hasClass(d.openClass)},toggle:function(a){return f.hidden(a)?f.hide(a):f.show(a),!1},show:function(a){f.checkData(a),e.container.slideDown(d.speed,d.easing,function(){d.changeText===!0&&f.changeText(a),d.activeLinkMode&&e.currentLink.addClass(d.activeLinkClass),e.container.addClass(d.openClass)}),d.accordian&&(f.hideAccordian(),e.accordians.push(e.container))},hide:function(a){d.activeLinkMode&&e.currentLink.removeClass(d.activeLinkClass),e.container.removeClass(d.openClass),e.container.slideUp(d.speed,d.easing,function(){d.changeText===!0&&f.changeText(a)})},hideAccordian:function(){var b=e.container,c=e.currentLink;return e.accordians.length&&b.attr("id")===e.accordians[0].attr("id")?(e.accordians.shift(),!1):(a.each(e.accordians,function(){e.container=a(this),e.currentLink=a('[data-id="'+a(this).attr("id")+'"]'),f.hide(a(this))}),e.container=b,e.currentLink=c,e.accordians.shift(),void 0)},hideAll:function(a){a.css({display:"none"})},changeText:function(a){e.container.is(":visible")?a.text(a.data("hideText")):a.text(a.data("showText"))},saveLink:function(a){a.data("showText",a.text()).data("hideText",d.hideText)}};this.each(function(){var b=a(this);f.hideAll(a("#"+b.data("id"))),d.changeText&&f.saveLink(b),d.defaultOpen&&b.data("id")===d.defaultOpen&&f.show(b),b.on("click",function(b){return b.preventDefault(),e.currentLink=a(this),e.container=a("#"+e.currentLink.data("id")),f.toggle(e.currentLink),this})})}}(jQuery);